(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[699],{5272:function(e,t,a){Promise.resolve().then(a.bind(a,1928))},7762:function(e,t,a){"use strict";var r=a(3827),l=a(8792),s=a(7907),i=a(4090);t.Z=e=>{let t=localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")),a=localStorage.getItem("cart")&&JSON.parse(localStorage.getItem("cart")),[n,o]=(0,i.useState)(t||void 0),[c,d]=(0,i.useState)(null==a?void 0:a.length),[u,p]=(0,i.useState)(a),h=(0,s.useRouter)();return console.log(t),(0,i.useEffect)(()=>{e.cartData&&(console.log(e),c?u[0].resto_id!=e.cartData.resto_id?(localStorage.removeItem("cart"),d(1),p([e.cartData]),localStorage.setItem("cart",JSON.stringify([e.cartData]))):(u.push(JSON.parse(JSON.stringify(e.cartData))),p(u),d(c+1),localStorage.setItem("cart",JSON.stringify(u))):(d(1),p([e.cartData]),localStorage.setItem("cart",JSON.stringify([e.cartData]))))},[e.cartData]),(0,i.useEffect)(()=>{if(e.removeCartData){let t=u.filter(t=>t._id!=e.removeCartData);p(t),d(c-1),localStorage.setItem("cart",JSON.stringify(t)),0==t.length&&localStorage.removeItem("cart")}},[e.removeCartData]),(0,i.useEffect)(()=>{e.removeCartData&&(p([]),d(0),localStorage.removeItem("cart"))},[e.removeCartData]),(0,r.jsxs)("div",{className:"header-wrapper",children:[(0,r.jsx)("div",{className:"logo",children:(0,r.jsx)("img",{style:{width:100},src:"https://s.tmimgcdn.com/scr/1200x627/242400/food-delivery-custom-design-logo-template_242462-original.png"})}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:"/",children:"Home"})}),n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:"/myprofile",children:null==n?void 0:n.name})}),(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("user"),h.push("/user-auth")},children:"Logout"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:"/",children:"Login"})}),(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:"/user-auth",children:"SignUp"})})]}),(0,r.jsx)("li",{children:(0,r.jsxs)(l.default,{href:c?"/cart":"#",children:["Cart(",c||0,")"]})}),(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:"/",children:"Add Restaurant"})}),(0,r.jsx)("li",{children:(0,r.jsx)(l.default,{href:"/deliverypartner",children:"Delivery Partner"})})]})]})}},5519:function(e,t,a){"use strict";var r=a(3827);t.Z=()=>(0,r.jsx)("div",{className:"footer-wrapper",children:(0,r.jsx)("p",{children:"All rights reserved by Resto app"})})},1928:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var r=a(3827),l=a(4090),s=a(7762),i=a(5519),n=a(7907),o=e=>{let[t,a]=(0,l.useState)(""),[s,i]=(0,l.useState)(""),o=(0,n.useRouter)();console.log("login",e);let c=async()=>{let a=await fetch("http://localhost:3000/api/user/login",{method:"post",body:JSON.stringify({email:t,password:s})});if((a=await a.json()).success){var r;let{result:t}=a;delete t.password,localStorage.setItem("user",JSON.stringify(t)),(null==e?void 0:null===(r=e.redirect)||void 0===r?void 0:r.order)?(console.log("login if"),o.push("/order")):(console.log("login else"),o.push("/"))}else alert("failed to login. Please try again with valid email and password")};return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"input-wrapper",children:(0,r.jsx)("input",{type:"text",placeholder:"enter email",value:t,onChange:e=>a(e.target.value),className:"input-field"})}),(0,r.jsx)("div",{className:"input-wrapper",children:(0,r.jsx)("input",{type:"password",placeholder:"enter password",value:s,onChange:e=>i(e.target.value),className:"input-field"})}),(0,r.jsx)("div",{className:"input-wrapper",children:(0,r.jsx)("button",{onClick:c,className:"button",children:"Login"})})]})},c=e=>{let[t,a]=(0,l.useState)(""),[s,i]=(0,l.useState)(""),[o,c]=(0,l.useState)(""),[d,u]=(0,l.useState)(""),[p,h]=(0,l.useState)(""),[g,m]=(0,l.useState)(""),[v,x]=(0,l.useState)(""),f=(0,n.useRouter)(),j=async()=>{console.log(t,s,o,d,p,g,v);let a=await fetch("http://localhost:3000/api/user",{method:"post",body:JSON.stringify({name:t,email:s,password:o,city:p,address:g,mobile:v})});if((a=await a.json()).success){var r;let{result:t}=a;delete t.password,localStorage.setItem("user",JSON.stringify(t)),(null==e?void 0:null===(r=e.redirect)||void 0===r?void 0:r.order)?f.push("/order"):f.push("/")}else alert("failed")};return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"input-wrapper",children:(0,r.jsx)("input",{type:"text",className:"input-field",value:t,onChange:e=>a(e.target.value),placeholder:"Enter name"})}),(0,r.jsx)("div",{className:"input-wrapper",children:(0,r.jsx)("input",{type:"text",className:"input-field",value:s,onChange:e=>i(e.target.value),placeholder:"Enter email"})}),(0,r.jsx)("div",{className:"input-wrapper",children:(0,r.jsx)("input",{type:"text",className:"input-field",value:o,onChange:e=>c(e.target.value),placeholder:"Enter password"})}),(0,r.jsx)("div",{className:"input-wrapper",children:(0,r.jsx)("input",{type:"text",className:"input-field",value:d,onChange:e=>u(e.target.value),placeholder:"Confirm password"})}),(0,r.jsx)("div",{className:"input-wrapper",children:(0,r.jsx)("input",{type:"text",className:"input-field",value:p,onChange:e=>h(e.target.value),placeholder:"Enter city"})}),(0,r.jsx)("div",{className:"input-wrapper",children:(0,r.jsx)("input",{type:"text",className:"input-field",value:g,onChange:e=>m(e.target.value),placeholder:"Enter address"})}),(0,r.jsx)("div",{className:"input-wrapper",children:(0,r.jsx)("input",{type:"text",className:"input-field",value:v,onChange:e=>x(e.target.value),placeholder:"Enter mobile"})}),(0,r.jsx)("div",{className:"input-wrapper",children:(0,r.jsx)("button",{onClick:j,className:"button",children:"Signup"})})]})},d=e=>{let[t,a]=(0,l.useState)(!0);return console.log("order flag",e),(0,r.jsxs)("div",{children:[(0,r.jsx)(s.Z,{}),(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("h1",{children:t?"User Login":"User Signup"}),t?(0,r.jsx)(o,{redirect:e.searchParams}):(0,r.jsx)(c,{redirect:e.searchParams}),(0,r.jsx)("button",{className:"button-link",onClick:()=>a(!t),children:t?"Do not have account? Signup":"Already have account ? login"})]}),(0,r.jsx)(i.Z,{})]})}}},function(e){e.O(0,[901,971,69,744],function(){return e(e.s=5272)}),_N_E=e.O()}]);